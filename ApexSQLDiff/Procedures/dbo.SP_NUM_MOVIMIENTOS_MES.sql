SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO




























CREATE PROCEDURE dbo.SP_NUM_MOVIMIENTOS_MES @CUENTA INTEGER OUTPUT   as

SET NOCOUNT ON 
DECLARE @CUENTA_ENT INTEGER,@CUENTA_SAL INTEGER
DECLARE @MES_ACT INTEGER,@ANYO_ACT INTEGER
SELECT @MES_ACT=MONTH(GETDATE())
SELECT @ANYO_ACT=YEAR(GETDATE())
SELECT @CUENTA_ENT= COUNT(*) FROM FACTIMP WHERE MONTH(FI_FECHA) = @MES_ACT AND YEAR(FI_FECHA) = @ANYO_ACT
SELECT @CUENTA_SAL= COUNT(*) FROM FACTEXP WHERE MONTH(FE_FECHA) = @MES_ACT AND YEAR(FE_FECHA) = @ANYO_ACT
SELECT @CUENTA =@CUENTA_ENT+@CUENTA_SAL



























GO
